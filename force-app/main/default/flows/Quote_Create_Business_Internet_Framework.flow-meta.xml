<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Commit_work</name>
        <label>Commit work</label>
        <locationX>446</locationX>
        <locationY>3554</locationY>
        <actionName>c:CommitTransaction</actionName>
        <actionType>component</actionType>
        <connector>
            <targetReference>Create_VAS_Quote_Line</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <nameSegment>c:CommitTransaction</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Redirect_to_Quote</name>
        <label>Redirect to Quote</label>
        <locationX>578</locationX>
        <locationY>4202</locationY>
        <actionName>c:navigateEverywhereLFA</actionName>
        <actionType>component</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>destinationAction</name>
            <value>
                <stringValue>view</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>destinationRecordId</name>
            <value>
                <elementReference>QuoteId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>destinationType</name>
            <value>
                <stringValue>record</stringValue>
            </value>
        </inputParameters>
        <nameSegment>c:navigateEverywhereLFA</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>56.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Add_Record_to_Record_Collection</name>
        <label>Add Record to Record Collection</label>
        <locationX>534</locationX>
        <locationY>1838</locationY>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLines</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>SubscriptionQuoteLine</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Product_Subscriptions</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_VAS_record_to_Collection</name>
        <label>Add VAS record to Collection</label>
        <locationX>1062</locationX>
        <locationY>3002</locationY>
        <assignmentItems>
            <assignToReference>VASQuoteLineCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>VASQuoteLine</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_VAS</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_No_Subscriptions_Boolean</name>
        <label>Assign No Subscriptions Boolean</label>
        <locationX>1106</locationX>
        <locationY>1514</locationY>
        <assignmentItems>
            <assignToReference>NoSubscriptionsBoolean</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Assign_Not_Framework_Variable</name>
        <label>Assign Not Framework Variable</label>
        <locationX>1370</locationX>
        <locationY>458</locationY>
        <assignmentItems>
            <assignToReference>NotFrameworkBoolean</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Not_a_Framework_Opportunity</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Product_Options</name>
        <label>Assign Product Options</label>
        <locationX>776</locationX>
        <locationY>1082</locationY>
        <assignmentItems>
            <assignToReference>VASProducts</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_all_OTC_product_options</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASProducts</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_all_VAS_product_options</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Empty_counter_NoOfSubscriptions</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Empty_counter_NoOfSubscriptions</name>
        <label>Empty counter NoOfSubscriptions</label>
        <locationX>776</locationX>
        <locationY>1190</locationY>
        <assignmentItems>
            <assignToReference>NoOfSubscriptions</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Save_NoOfSubscriptions</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Empty_counter_NoOfVAS</name>
        <label>Empty counter NoOfVAS</label>
        <locationX>534</locationX>
        <locationY>1622</locationY>
        <assignmentItems>
            <assignToReference>NoOfVAS</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Save_Quote_Line_data_for_Subscription</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Save_counts</name>
        <label>Save counts</label>
        <locationX>446</locationX>
        <locationY>3446</locationY>
        <assignmentItems>
            <assignToReference>NoOfVAS</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>VASQuoteLineCollection</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Commit_work</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Save_existing_Primary_Quote_ID</name>
        <label>Save existing Primary Quote ID</label>
        <locationX>644</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>QuoteId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Opportunity.SBQQ__PrimaryQuote__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Framework_Products</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Save_NoOfSubscriptions</name>
        <label>Save NoOfSubscriptions</label>
        <locationX>776</locationX>
        <locationY>1298</locationY>
        <assignmentItems>
            <assignToReference>NoOfSubscriptions</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Get_Framework_Products</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Any_Subscriptions_Found</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Save_NoOfVAS</name>
        <label>Save NoOfVAS</label>
        <locationX>842</locationX>
        <locationY>2462</locationY>
        <assignmentItems>
            <assignToReference>NoOfVAS</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Get_All_VAS_for_subscription</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Any_VAS_Found</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Save_Quote_Line_data_for_Subscription</name>
        <label>Save Quote Line data for Subscription</label>
        <locationX>534</locationX>
        <locationY>1730</locationY>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.Quote_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New_Business</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.SBQQ__PricebookEntryId__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Opportunity.Pricebook2Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.SBQQ__Product__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Product_Subscriptions.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.SBQQ__ProductName__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Product_Subscriptions.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.SBQQ__Quantity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.SBQQ__Quote__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.Activate_with_other_products__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.SBQQ__DynamicOptionId__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.SBQQ__OptionType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.SBQQ__OptionLevel__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.Quote_Document_Group__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.SBQQ__NonDiscountable__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubscriptionQuoteLine.Sales_type_shadow__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New Business</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Record_to_Record_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Save_Quote_Line_data_for_VAS</name>
        <label>Save Quote Line data for VAS</label>
        <locationX>1062</locationX>
        <locationY>2894</locationY>
        <assignmentItems>
            <assignToReference>VASQuoteLine.Quote_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New_Business</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.SBQQ__PricebookEntryId__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Opportunity.Pricebook2Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.SBQQ__Product__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_VAS.SBQQ__OptionalSKU__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.SBQQ__ProductName__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_VAS.SBQQ__ProductName__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.SBQQ__Quantity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.SBQQ__Quote__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.Activate_with_other_products__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.SBQQ__DynamicOptionId__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_VAS.SBQQ__Feature__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.SBQQ__OptionType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Component</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.SBQQ__OptionLevel__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.SBQQ__ProductOption__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_VAS.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.Quote_Document_Group__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Framework_Products.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.SBQQ__BundledQuantity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_VAS.SBQQ__Quantity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.SBQQ__NonDiscountable__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.SBQQ__RequiredBy__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Filterd_Quote_Lines_for_VAS.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>VASQuoteLine.Sales_type_shadow__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New Business</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_VAS_record_to_Collection</targetReference>
        </connector>
    </assignments>
    <collectionProcessors>
        <name>Filter_Quote_Lines_for_VAS</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Filter Quote Lines for VAS</label>
        <locationX>842</locationX>
        <locationY>2354</locationY>
        <assignNextValueToReference>currentItem_Filter_Quote_Lines_for_VAS</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>SubscriptionQuoteLines</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_Filter_Quote_Lines_for_VAS.SBQQ__Product__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>Loop_Framework_Products.Id</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Save_NoOfVAS</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>Get_All_VAS_for_subscription</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Get All VAS for subscription</label>
        <locationX>842</locationX>
        <locationY>2246</locationY>
        <assignNextValueToReference>currentItem_Get_All_VAS_for_subscription</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>VASProducts</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_Get_All_VAS_for_subscription.SBQQ__ConfiguredSKU__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>Loop_Framework_Products.Id</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Filter_Quote_Lines_for_VAS</targetReference>
        </connector>
    </collectionProcessors>
    <decisions>
        <name>Any_Subscriptions_Found</name>
        <label>Any Subscriptions Found ?</label>
        <locationX>776</locationX>
        <locationY>1406</locationY>
        <defaultConnector>
            <targetReference>Assign_No_Subscriptions_Boolean</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Subscriptions</defaultConnectorLabel>
        <rules>
            <name>Yes_Subscriptions_exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>NoOfSubscriptions</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_Product_Subscriptions</targetReference>
            </connector>
            <label>Yes, Subscriptions exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>Any_VAS_Found</name>
        <label>Any VAS Found?</label>
        <locationX>842</locationX>
        <locationY>2570</locationY>
        <defaultConnector>
            <targetReference>Loop_Framework_Products</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_VAS_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>NoOfVAS</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_Filterd_Quote_Lines_for_VAS</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Decide_Next_Action</name>
        <label>Decide Next Action</label>
        <locationX>446</locationX>
        <locationY>4094</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Not_A_Framework_Case</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>NotFrameworkBoolean</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Not_a_Framework_Opportunity</targetReference>
            </connector>
            <label>Not A Framework Case</label>
        </rules>
        <rules>
            <name>No_Product_Screen</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>NoSubscriptionsBoolean</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NoProductsScreen</targetReference>
            </connector>
            <label>No Product Screen</label>
        </rules>
        <rules>
            <name>Redirect_to_Quote_Action</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>OriginatesFromNewSalesFlow</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Redirect_to_Quote</targetReference>
            </connector>
            <label>Redirect to Quote Action</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_BI_Case_Framework</name>
        <label>Is BI Case Framework?</label>
        <locationX>1073</locationX>
        <locationY>350</locationY>
        <defaultConnector>
            <targetReference>Assign_Not_Framework_Variable</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No, not Framework</defaultConnectorLabel>
        <rules>
            <name>Yes_this_is_Framework</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Business_Internet_Case.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Primary_Quote_on_Opportunity</targetReference>
            </connector>
            <label>Yes, this is Framework</label>
        </rules>
    </decisions>
    <decisions>
        <name>Primary_Quote_on_Opportunity</name>
        <label>Primary Quote on Opportunity ?</label>
        <locationX>776</locationX>
        <locationY>458</locationY>
        <defaultConnector>
            <targetReference>Create_Quote</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Primary Quote</defaultConnectorLabel>
        <rules>
            <name>Yes_Primary_Quote_on_Opportunity</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Opportunity.SBQQ__PrimaryQuote__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Opportunity.SBQQ__PrimaryQuote__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Save_existing_Primary_Quote_ID</targetReference>
            </connector>
            <label>Yes, Primary Quote on Opportunity</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>ExistingSpecialTermWithAppendedValue</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!ExistingSpecialTerms}),{!AdditionalSpecialTerms}, SUBSTITUTE(SUBSTITUTE({!ExistingSpecialTerms}, &apos;[&apos; , &apos;&apos; ), 
&apos;]&apos;, &apos;;&apos; + {!AdditionalSpecialTerms}))</expression>
    </formulas>
    <formulas>
        <name>StartDatePlus30Days</name>
        <dataType>Date</dataType>
        <expression>TODAY() + 30</expression>
    </formulas>
    <interviewLabel>Quote Create Business Internet (Framework) {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Quote Create Business Internet (Framework)</label>
    <loops>
        <name>Loop_Filterd_Quote_Lines_for_VAS</name>
        <label>Loop Filterd Quote Lines for VAS</label>
        <locationX>798</locationX>
        <locationY>2678</locationY>
        <collectionReference>Filter_Quote_Lines_for_VAS</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Loop_VAS</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Loop_Framework_Products</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Framework_Products</name>
        <label>Loop Framework Products</label>
        <locationX>446</locationX>
        <locationY>2138</locationY>
        <collectionReference>Get_Framework_Products</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Get_All_VAS_for_subscription</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Save_counts</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Product_Subscriptions</name>
        <label>Loop Product Subscriptions</label>
        <locationX>446</locationX>
        <locationY>1514</locationY>
        <collectionReference>Get_Framework_Products</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Empty_counter_NoOfVAS</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Subscription_Quote_Line</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_VAS</name>
        <label>Loop VAS</label>
        <locationX>974</locationX>
        <locationY>2786</locationY>
        <collectionReference>Get_All_VAS_for_subscription</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Save_Quote_Line_data_for_VAS</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Loop_Filterd_Quote_Lines_for_VAS</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_Quote</name>
        <label>Create Quote</label>
        <locationX>908</locationX>
        <locationY>566</locationY>
        <assignRecordIdToReference>QuoteId</assignRecordIdToReference>
        <connector>
            <targetReference>Get_Framework_Products</targetReference>
        </connector>
        <inputAssignments>
            <field>Additional_Special_Terms_on_Contract__c</field>
            <value>
                <elementReference>AdditionalSpecialTerms</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Ready_for_Calculation__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__Account__c</field>
            <value>
                <elementReference>Get_Opportunity.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__Opportunity2__c</field>
            <value>
                <elementReference>Get_Opportunity.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__PaperSize__c</field>
            <value>
                <stringValue>A4</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__PricebookId__c</field>
            <value>
                <elementReference>Get_Opportunity.Pricebook2Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__Primary__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__StartDate__c</field>
            <value>
                <elementReference>StartDatePlus30Days</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__SubscriptionTerm__c</field>
            <value>
                <numberValue>36.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__Type__c</field>
            <value>
                <elementReference>Get_Opportunity.Type</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__WatermarkShown__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>SBQQ__Quote__c</object>
    </recordCreates>
    <recordCreates>
        <name>Create_Subscription_Quote_Line</name>
        <label>Create Subscription Quote Line</label>
        <locationX>446</locationX>
        <locationY>2030</locationY>
        <connector>
            <targetReference>Loop_Framework_Products</targetReference>
        </connector>
        <inputReference>SubscriptionQuoteLines</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_VAS_Quote_Line</name>
        <label>Create VAS Quote Line</label>
        <locationX>446</locationX>
        <locationY>3662</locationY>
        <connector>
            <targetReference>Save_QuoteId_on_Opportunity</targetReference>
        </connector>
        <inputReference>VASQuoteLineCollection</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_all_OTC_product_options</name>
        <label>Get all OTC product options</label>
        <locationX>776</locationX>
        <locationY>866</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_all_VAS_product_options</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__ProductCode__c</field>
            <operator>StartsWith</operator>
            <value>
                <stringValue>371</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>SBQQ__ProductOption__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>SBQQ__OptionalSKU__c</queriedFields>
        <queriedFields>SBQQ__ProductName__c</queriedFields>
        <queriedFields>SBQQ__Feature__c</queriedFields>
        <queriedFields>SBQQ__Quantity__c</queriedFields>
        <queriedFields>SBQQ__ConfiguredSKU__c</queriedFields>
        <sortField>SBQQ__ProductCode__c</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_all_VAS_product_options</name>
        <label>Get all VAS product options</label>
        <locationX>776</locationX>
        <locationY>974</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Product_Options</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__ProductCode__c</field>
            <operator>StartsWith</operator>
            <value>
                <stringValue>372</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>SBQQ__ProductOption__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>SBQQ__OptionalSKU__c</queriedFields>
        <queriedFields>SBQQ__ProductName__c</queriedFields>
        <queriedFields>SBQQ__Feature__c</queriedFields>
        <queriedFields>SBQQ__Quantity__c</queriedFields>
        <queriedFields>SBQQ__ConfiguredSKU__c</queriedFields>
        <sortField>SBQQ__ProductCode__c</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Business_Internet_Case</name>
        <label>Get Business Internet Case</label>
        <locationX>1073</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_BI_Case_Framework</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Type</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Business Internet</stringValue>
            </value>
        </filters>
        <filters>
            <field>Agreement_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Framework</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Case</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Framework_Products</name>
        <label>Get Framework Products</label>
        <locationX>776</locationX>
        <locationY>758</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_all_OTC_product_options</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ProductCode</field>
            <operator>StartsWith</operator>
            <value>
                <stringValue>370</stringValue>
            </value>
        </filters>
        <filters>
            <field>IsActive</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Product2</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <sortField>ProductCode</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Opportunity</name>
        <label>Get Opportunity</label>
        <locationX>1073</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Business_Internet_Case</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Agreement_Type__c</queriedFields>
        <queriedFields>Need_Customer_Project_Manager__c</queriedFields>
        <queriedFields>Need_Help_With_Data_Collection__c</queriedFields>
        <queriedFields>SBQQ__PrimaryQuote__c</queriedFields>
        <queriedFields>Pricebook2Id</queriedFields>
        <queriedFields>AccountId</queriedFields>
        <queriedFields>Type</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Save_QuoteId_on_Case</name>
        <label>Save QuoteId on Case</label>
        <locationX>446</locationX>
        <locationY>3878</locationY>
        <connector>
            <targetReference>Update_Ready_for_Calculation_on_Quote</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Business_Internet_Case.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Quote__c</field>
            <value>
                <elementReference>QuoteId</elementReference>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordUpdates>
    <recordUpdates>
        <name>Save_QuoteId_on_Opportunity</name>
        <label>Save QuoteId on Opportunity</label>
        <locationX>446</locationX>
        <locationY>3770</locationY>
        <connector>
            <targetReference>Save_QuoteId_on_Case</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Opportunity.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Home_Office_Quote_Created__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SBQQ__PrimaryQuote__c</field>
            <value>
                <elementReference>QuoteId</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Ready_for_Calculation_on_Quote</name>
        <label>Update Ready for Calculation on Quote</label>
        <locationX>446</locationX>
        <locationY>3986</locationY>
        <connector>
            <targetReference>Decide_Next_Action</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>QuoteId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Ready_for_Calculation__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>SBQQ__Quote__c</object>
    </recordUpdates>
    <screens>
        <name>NoProductsScreen</name>
        <label>NoProductsScreen</label>
        <locationX>314</locationX>
        <locationY>4202</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>NoProductsFound</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 14px; color: rgb(247, 1, 1);&quot;&gt;No products for Framework Agreement found. Contact Product Manager.&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <styleProperties>
                <verticalAlignment>
                    <stringValue>top</stringValue>
                </verticalAlignment>
                <width>
                    <stringValue>12</stringValue>
                </width>
            </styleProperties>
        </fields>
        <nextOrFinishButtonLabel>Close</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Not_a_Framework_Opportunity</name>
        <label>Not a Framework Opportunity</label>
        <locationX>50</locationX>
        <locationY>4202</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>NotFrameWork</name>
            <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;This is not a FrameWork Opportunity. You are not able to create a Framework Quote&lt;/strong&gt;.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <styleProperties>
                <verticalAlignment>
                    <stringValue>top</stringValue>
                </verticalAlignment>
                <width>
                    <stringValue>12</stringValue>
                </width>
            </styleProperties>
        </fields>
        <nextOrFinishButtonLabel>Close</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>947</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_Opportunity</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>AdditionalSpecialTerms</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>BusinessInternetFramework</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>currentItem_Filter_Quote_Lines_for_VAS</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SBQQ__QuoteLine__c</objectType>
    </variables>
    <variables>
        <name>currentItem_Get_All_VAS_for_subscription</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SBQQ__ProductOption__c</objectType>
    </variables>
    <variables>
        <name>ExistingSpecialTerms</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>HomeOfficeFramework</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NoOfSubscriptions</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>NoOfVAS</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>NoSubscriptionsBoolean</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NotFrameworkBoolean</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>OriginatesFromNewSalesFlow</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>QuoteId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SubscriptionQuoteLine</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SBQQ__QuoteLine__c</objectType>
    </variables>
    <variables>
        <name>SubscriptionQuoteLines</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SBQQ__QuoteLine__c</objectType>
    </variables>
    <variables>
        <name>VASProducts</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SBQQ__ProductOption__c</objectType>
    </variables>
    <variables>
        <name>VASQuoteLine</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SBQQ__QuoteLine__c</objectType>
    </variables>
    <variables>
        <name>VASQuoteLineCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SBQQ__QuoteLine__c</objectType>
    </variables>
</Flow>
