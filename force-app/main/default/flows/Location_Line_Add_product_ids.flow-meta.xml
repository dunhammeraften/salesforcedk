<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>58.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Reset_OTC_to_spaces</name>
        <label>Reset OTC to spaces</label>
        <locationX>418</locationX>
        <locationY>866</locationY>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.OTC_product__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.OTC_Product_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.OTC_Product_Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.OTC_Product_Option_Feature__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.OTC_Product_Option_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.OTC_Product_Option_Quantity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Was_Subscription_Product_Changed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Reset_VAS_to_spaces</name>
        <label>Reset VAS to spaces</label>
        <locationX>418</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.VAS_product__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.VAS_Product_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.VAS_Product_Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.VAS_Product_Option_Feature__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.VAS_Product_Option_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.VAS_Product_Option_Quantity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_OTC_Null</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Save_new_OTC</name>
        <label>Save new OTC</label>
        <locationX>396</locationX>
        <locationY>2306</locationY>
        <assignmentItems>
            <assignToReference>OTC</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Location_Lines.OTC_product__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_OTC_product_data_on_current_LocationLine</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Save_new_Subscription</name>
        <label>Save new Subscription</label>
        <locationX>550</locationX>
        <locationY>1466</locationY>
        <assignmentItems>
            <assignToReference>Subscription</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Location_Lines.Subscription_product__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Subscription_product_data_on_current_LocationLine</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Save_new_VAS</name>
        <label>Save new VAS</label>
        <locationX>396</locationX>
        <locationY>3230</locationY>
        <assignmentItems>
            <assignToReference>VAS</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Location_Lines.VAS_product__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_VAS_product_data_on_current_LocationLine</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Save_updated_LocationLine</name>
        <label>Save updated LocationLine</label>
        <locationX>550</locationX>
        <locationY>3530</locationY>
        <assignmentItems>
            <assignToReference>UpdatedLocationLineCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_Location_Lines</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Location_Lines</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_OTC_product_data_on_current_LocationLine</name>
        <label>Update OTC product data on current LocationLine</label>
        <locationX>396</locationX>
        <locationY>2414</locationY>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.OTC_Product_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_OTC_Product.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.OTC_Product_Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_OTC_Product.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.OTC_Product_Option_Feature__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_OTC_Product_Option.SBQQ__Feature__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.OTC_Product_Option_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_OTC_Product_Option.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.OTC_Product_Option_Quantity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_OTC_Product_Option.SBQQ__Quantity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.OTC_Product_Gearing__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_OTC_Product.Product_Gearing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.OTC_PriceBookEntryId__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_OTC_PriceBookEntry.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_there_an_VAS_in_the_Location_Line</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Subscription_product_data_on_current_LocationLine</name>
        <label>Update Subscription product data on current LocationLine</label>
        <locationX>550</locationX>
        <locationY>1574</locationY>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.Subscription_Product_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Subscription_Product.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.Subscription_Product_Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Subscription_Product.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.Subscription_Product_Gearing__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Subscription_Product.Product_Gearing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.Subscription_PriceBookEntryId__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Subscription_PriceBookEntry.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_there_an_OTC_in_the_Location_Line</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_VAS_product_data_on_current_LocationLine</name>
        <label>Update VAS product data on current LocationLine</label>
        <locationX>396</locationX>
        <locationY>3338</locationY>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.VAS_Product_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_VAS_Product.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.VAS_Product_Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_VAS_Product.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.VAS_Product_Option_Feature__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_VAS_Product_Option.SBQQ__Feature__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.VAS_Product_Option_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_VAS_Product_Option.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.VAS_Product_Option_Quantity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_VAS_Product_Option.SBQQ__Quantity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.VAS_Product_Gearing__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_VAS_Product.Product_Gearing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Location_Lines.VAS_PriceBookEntryId__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_VAS_PriceBookEntry.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Save_updated_LocationLine</targetReference>
        </connector>
    </assignments>
    <collectionProcessors>
        <name>Sort_Location_Lines</name>
        <elementSubtype>SortCollectionProcessor</elementSubtype>
        <label>Sort Location Lines</label>
        <locationX>176</locationX>
        <locationY>242</locationY>
        <collectionProcessorType>SortCollectionProcessor</collectionProcessorType>
        <collectionReference>Get_Location_Lines</collectionReference>
        <connector>
            <targetReference>Loop_Location_Lines</targetReference>
        </connector>
        <sortOptions>
            <doesPutEmptyStringAndNullFirst>true</doesPutEmptyStringAndNullFirst>
            <sortField>Subscription_product__c</sortField>
            <sortOrder>Asc</sortOrder>
        </sortOptions>
        <sortOptions>
            <doesPutEmptyStringAndNullFirst>true</doesPutEmptyStringAndNullFirst>
            <sortField>OTC_product__c</sortField>
            <sortOrder>Asc</sortOrder>
        </sortOptions>
        <sortOptions>
            <doesPutEmptyStringAndNullFirst>true</doesPutEmptyStringAndNullFirst>
            <sortField>VAS_product__c</sortField>
            <sortOrder>Asc</sortOrder>
        </sortOptions>
    </collectionProcessors>
    <decisions>
        <description>OTC in location Line is null (not space) when data is created. I order to compare with flow variable it must bed changed to space</description>
        <name>Is_OTC_Null</name>
        <label>Is OTC Null ?</label>
        <locationX>550</locationX>
        <locationY>758</locationY>
        <defaultConnector>
            <targetReference>Was_Subscription_Product_Changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No OTC is not Null</defaultConnectorLabel>
        <rules>
            <name>Yes_OTC_is_Null</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Location_Lines.OTC_product__c</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <conditions>
                <leftValueReference>Loop_Location_Lines.OTC_product__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Reset_OTC_to_spaces</targetReference>
            </connector>
            <label>Yes OTC is Null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_there_an_OTC_in_the_Location_Line</name>
        <label>Is there an OTC in the Location Line ?</label>
        <locationX>550</locationX>
        <locationY>1682</locationY>
        <defaultConnector>
            <targetReference>Is_there_an_VAS_in_the_Location_Line</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No, there is not a OTC</defaultConnectorLabel>
        <rules>
            <name>Yes_there_is_a_OTC</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Location_Lines.OTC_product__c</leftValueReference>
                <operator>NotEqualTo</operator>
            </conditions>
            <conditions>
                <leftValueReference>Loop_Location_Lines.OTC_product__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Was_OTC_Changed</targetReference>
            </connector>
            <label>Yes, there is a OTC</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_there_an_VAS_in_the_Location_Line</name>
        <label>Is there an VAS in the Location Line ?</label>
        <locationX>550</locationX>
        <locationY>2606</locationY>
        <defaultConnector>
            <targetReference>Save_updated_LocationLine</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No, there is not a VAS</defaultConnectorLabel>
        <rules>
            <name>Yes_there_is_a_VAS</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Location_Lines.VAS_product__c</leftValueReference>
                <operator>NotEqualTo</operator>
            </conditions>
            <conditions>
                <leftValueReference>Loop_Location_Lines.VAS_product__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Was_VAS_Changed</targetReference>
            </connector>
            <label>Yes, there is a VAS</label>
        </rules>
    </decisions>
    <decisions>
        <description>VAS in location Line is null (not space) when data is created. I order to compare with flow variable it must bed changed to space</description>
        <name>Is_VAS_Null</name>
        <label>Is VAS Null ?</label>
        <locationX>550</locationX>
        <locationY>458</locationY>
        <defaultConnector>
            <targetReference>Is_OTC_Null</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No VAS is not Null</defaultConnectorLabel>
        <rules>
            <name>Yes_VAS_is_Null</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Location_Lines.VAS_product__c</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <conditions>
                <leftValueReference>Loop_Location_Lines.VAS_product__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Reset_VAS_to_spaces</targetReference>
            </connector>
            <label>Yes VAS is Null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Was_OTC_Changed</name>
        <label>Was OTC Changed ?</label>
        <locationX>396</locationX>
        <locationY>1790</locationY>
        <defaultConnector>
            <targetReference>Save_new_OTC</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No OTC was not changed</defaultConnectorLabel>
        <rules>
            <name>Yes_OTC_was_changed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Location_Lines.OTC_product__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>OTC</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_OTC_Product</targetReference>
            </connector>
            <label>Yes, OTC was changed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Was_Subscription_Product_Changed</name>
        <label>Was Subscription Product Changed ?</label>
        <locationX>550</locationX>
        <locationY>1058</locationY>
        <defaultConnector>
            <targetReference>Save_new_Subscription</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Subscription Product was Not Changed</defaultConnectorLabel>
        <rules>
            <name>Yes_Subscription_Product_was_Changed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Subscription</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>Loop_Location_Lines.Subscription_product__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Subscription_Product</targetReference>
            </connector>
            <label>Yes Subscription Product was Changed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Was_VAS_Changed</name>
        <label>Was VAS Changed ?</label>
        <locationX>396</locationX>
        <locationY>2714</locationY>
        <defaultConnector>
            <targetReference>Save_new_VAS</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No, VAS was not changed</defaultConnectorLabel>
        <rules>
            <name>Yes_VAS_was_changed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Location_Lines.VAS_product__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>VAS</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_VAS_Product</targetReference>
            </connector>
            <label>Yes, VAS was changed</label>
        </rules>
    </decisions>
    <description>To prevent creation of quote to fail because of too many soql, fetching product id&apos;s is moved to a dedicated flow for this.</description>
    <environments>Default</environments>
    <interviewLabel>Location Line - Add product ids {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Location Line - Add product ids</label>
    <loops>
        <name>Loop_Location_Lines</name>
        <label>Loop Location Lines</label>
        <locationX>176</locationX>
        <locationY>350</locationY>
        <collectionReference>Get_Location_Lines</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Is_VAS_Null</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_LocationLines_with_added_ProductId_s</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Location_Lines</name>
        <label>Get Location Lines</label>
        <locationX>176</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Sort_Location_Lines</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Address_Wash_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Valid</stringValue>
            </value>
        </filters>
        <filters>
            <field>Subscription_product__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Location_Line__c</object>
        <sortField>Subscription_product__c</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_OTC_PriceBookEntry</name>
        <label>Get OTC PriceBookEntry</label>
        <locationX>264</locationX>
        <locationY>2006</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_OTC_Product_Option</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Product2Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_OTC_Product.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Pricebook2Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Loop_Location_Lines.Opportunity__r.Pricebook2Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PricebookEntry</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_OTC_Product</name>
        <label>Get OTC Product</label>
        <locationX>264</locationX>
        <locationY>1898</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_OTC_PriceBookEntry</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ProductAPI_Telia_Product_Id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Loop_Location_Lines.OTC_product__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Product2</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_OTC_Product_Option</name>
        <label>Get OTC Product Option</label>
        <locationX>264</locationX>
        <locationY>2114</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Save_new_OTC</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__ConfiguredSKU__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Subscription_Product.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>SBQQ__OptionalSKU__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_OTC_Product.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>SBQQ__ProductOption__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Subscription_PriceBookEntry</name>
        <label>Get Subscription PriceBookEntry</label>
        <locationX>418</locationX>
        <locationY>1274</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Save_new_Subscription</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Product2Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Subscription_Product.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Pricebook2Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Loop_Location_Lines.Opportunity__r.Pricebook2Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PricebookEntry</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Subscription_Product</name>
        <label>Get Subscription Product</label>
        <locationX>418</locationX>
        <locationY>1166</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Subscription_PriceBookEntry</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ProductAPI_Telia_Product_Id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Loop_Location_Lines.Subscription_product__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Product2</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_VAS_PriceBookEntry</name>
        <label>Get VAS PriceBookEntry</label>
        <locationX>264</locationX>
        <locationY>2930</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_VAS_Product_Option</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Product2Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_VAS_Product.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Pricebook2Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Loop_Location_Lines.Opportunity__r.Pricebook2Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>PricebookEntry</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_VAS_Product</name>
        <label>Get VAS Product</label>
        <locationX>264</locationX>
        <locationY>2822</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_VAS_PriceBookEntry</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ProductAPI_Telia_Product_Id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Loop_Location_Lines.VAS_product__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Product2</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_VAS_Product_Option</name>
        <label>Get VAS Product Option</label>
        <locationX>264</locationX>
        <locationY>3038</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Save_new_VAS</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__ConfiguredSKU__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Subscription_Product.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>SBQQ__OptionalSKU__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_VAS_Product.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>SBQQ__ProductOption__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_LocationLines_with_added_ProductId_s</name>
        <label>Update LocationLines with added ProductId&apos;s</label>
        <locationX>176</locationX>
        <locationY>3722</locationY>
        <inputReference>UpdatedLocationLineCollection</inputReference>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <start>
        <locationX>50</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_Location_Lines</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>OTC</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Subscription</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>UpdatedLocationLineCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Location_Line__c</objectType>
    </variables>
    <variables>
        <name>VAS</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
</Flow>
